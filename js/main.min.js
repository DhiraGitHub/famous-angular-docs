angular.module("famous-angular",["famous.angular","ui.router"]),angular.module("docsApp",["examples","bootstrap","bootstrapPrettify"]).controller("DocsController",["$scope","openPlunkr",function($scope,openPlunkr){$scope.openPlunkr=openPlunkr}]),angular.module("examples",[]).factory("formPostData",["$document",function($document){return function(url,fields){var form=angular.element('<form style="display: none;" method="post" action="'+url+'"></form>');angular.forEach(fields,function(value,name){var input=angular.element('<input type="hidden" name="'+name+'">');input.attr("value",value),form.append(input)}),$document.find("body").append(form),form[0].submit(),form.remove()}}]).factory("openPlunkr",["formPostData","$http","$q",function(formPostData,$http,$q){return function(exampleFolder){var exampleName="AngularJS Example";$http.get(exampleFolder+"/manifest.json").then(function(response){return response.data}).then(function(manifest){var filePromises=[],exampleNameParts=manifest.name.split("-");exampleNameParts.unshift("AngularJS"),angular.forEach(exampleNameParts,function(part,index){exampleNameParts[index]=part.charAt(0).toUpperCase()+part.substr(1)}),exampleName=exampleNameParts.join(" - ");var getFileName=function(filename,checkName){return-1!==filename.indexOf("/")&&(filename=filename.substr(filename.lastIndexOf("/")+1,filename.length)),checkName&&-1!==manifest.files.indexOf(filename)&&(filename="_"+filename),filename},pushLocalFile=function(filename,checkName){var deferred=$q.defer();return $http.get(exampleFolder+"/"+filename,{transformResponse:[]}).then(function(response){var innerFiles=[];filename=getFileName(filename,checkName);for(var reg=/<(?:script|link).*(?:src|href)="((?!(http|\/\/))(?:(?!").)+)"/gi,localResources=reg.exec(response.data);localResources&&localResources[1];)-1===manifest.files.indexOf(localResources[1])&&(innerFiles.push(pushLocalFile(localResources[1]),!0),response.data=response.data.replace(localResources[1],getFileName(localResources[1],!0))),localResources=reg.exec(response.data);innerFiles.length>0?$q.all(innerFiles).then(function(files){files=files||[],files.push({name:filename,content:response.data}),deferred.resolve(files)}):deferred.resolve({name:filename,content:response.data})},function(){deferred.reject()}),deferred.promise};return angular.forEach(manifest.files,function(filename){filePromises.push(pushLocalFile(filename))}),$q.all(filePromises)}).then(function(files){var postData={};angular.forEach(files,function(filesList){angular.isArray(filesList)?angular.forEach(filesList,function(file){postData["files["+file.name+"]"]=file.content}):postData["files["+filesList.name+"]"]=filesList.content}),postData["tags[0]"]="angularjs",postData["tags[1]"]="example",postData.private=!0,postData.description=exampleName,formPostData("http://plnkr.co/edit/?p=preview",postData)})}}]),angular.module("famous-angular").controller("homepageCtrl",["$scope",function(){}]),angular.module("famous-angular").controller("homepageExamplesCtrl",["$scope",function($scope){function translateSquare(index){return 75*(index||0)}$scope.options={grid:{dimensions:[2,2]}},$scope.squares=_.map(_.range(0,4),function(index){return{x:translateSquare(index)}}),$scope.modifiers=[0,1,2],$scope.data={rangeValue:0,repeatedItems:1},$scope.translateX=function(rangeValue){var sliderWidth=300,leftOffset=-20;return rangeValue?Number(rangeValue)/100*sliderWidth+leftOffset:0+leftOffset},$scope.$watch("data.repeatedItems",function(value){$scope.modifiers=_.range(0,value)})}]),angular.module("famous-angular").config(["$stateProvider","$urlRouterProvider",function($stateProvider){$stateProvider.state("intro",{url:"intro",templateUrl:"templates/state-intro.html"}).state("1",{url:"1",templateUrl:"templates/state-1.html",controller:"state1Ctrl"})}]),angular.module("famous-angular").directive("square",["$famous",function($famous){var Transform=$famous["famous/core/Transform"],Transitionable=$famous["famous/transitions/Transitionable"],SnapTransition=$famous["famous/transitions/SnapTransition"],flipOut=Transform.rotateZ(Math.PI/2),flipIn=Transform.inverse(flipOut);return{restrict:"A",priority:3,link:function(scope){function translateSquare(index){return 75*(index||0)}function enter(){return transform.set(Transform.multiply(transform.get(),flipIn),{duration:250,transition:SnapTransition}),opacity.set(1,{duration:250,curve:"easeOut"}),250}function leave(){return transform.set(Transform.multiply(transform.get(),flipOut),{duration:250,transition:SnapTransition}),opacity.set(0,{duration:250,curve:"easeIn"}),250}function halt(){scope.transform.halt()}var transform=new Transitionable(Transform.multiply(Transform.translate(translateSquare(scope.$index%4),60*Math.floor(scope.$index/4)+40,0),flipOut)),opacity=new Transitionable(0);angular.extend(scope,{enter:enter,leave:leave,halt:halt,opacity:opacity,transform:transform})}}}]),angular.module("famous-angular").controller("state1Ctrl",["$scope","$famous","$timeline","scroll",function($scope,$famous,$timeline,scroll){$("#state-1").css("opacity",1);var Easing=($famous["famous/transitions/Transitionable"],$famous["famous/transitions/Easing"]);$scope.scroll=scroll,$scope.content={translate:function(){return $timeline([[0,[-1e3,0,0],Easing.inOutQuart],[30,[0,0,0]]])($scope.scroll.get())}},$scope.example={frame:{translate:function(){return $timeline([[30,[0,-1e3,0],Easing.inOutQuart],[50,[0,0,0]]])($scope.scroll.get())}},header:{translate:function(){return $timeline([[50,[0,-1e3,0],Easing.inOutQuart],[70,[10,50,0]]])($scope.scroll.get())}},sidenav:{translate:function(){return $timeline([[70,[0,1e3,0],Easing.inOutQuart],[80,[10,90,0]]])($scope.scroll.get())}},container:{translate:function(){return $timeline([[80,[1e3,90,0],Easing.inOutQuart],[90,[70,90,0]]])($scope.scroll.get())}},content:{translate:function(){return[90,110,0]},opacity:function(){return $timeline([[93,0,Easing.inOutQuart],[99,1]])($scope.scroll.get())},scale:function(){return $timeline([[90,[.1,.1],Easing.inOutQuart],[99,[1,1]]])($scope.scroll.get())}}}}]),angular.module("famous-angular").controller("stateIntroCtrl",["$scope","$famous","$timeline","scroll",function($scope,$famous){var Transitionable=$famous["famous/transitions/Transitionable"],opacity=($famous["famous/transitions/Easing"],new Transitionable(0));$scope.opacity=function(){return opacity.get()},$scope.testEnter=function($done){console.log("enter"),$scope.opacity.set(1,{duration:1e3},$done)},$scope.leave=function($done){$scope.opacity.set(0,{duration:1e3},$done)}}]),angular.module("famous-angular").run(["$rootScope","scroll",function($rootScope){$rootScope.bodyHeight=5e3}]).factory("scroll",["$rootScope","$famous","$timeline","$state",function($rootScope,$famous,$timeline,$state){function onscrollHandler(){var pageYOffset=window.pageYOffset,scrollMax=$rootScope.bodyHeight;scroll=$timeline([[0,0,function(x){return x}],[scrollMax,(stateCount-1)*rangePerState]])(pageYOffset),determineState(scroll)}function determineState(scroll){100>scroll?($("#state-1").css("opacity",0),$state.go("intro")):200>scroll&&$state.go("1")}console.log("scroll loaded");var scroll=($famous["famous/transitions/Transitionable"],$famous["famous/transitions/Easing"],0),rangePerState=100,stateCount=7;return window.onscroll=onscrollHandler,onscrollHandler(),{get:function(){return scroll%rangePerState}}}]);